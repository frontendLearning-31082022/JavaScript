<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="1.js"></script>
  <!-- <script src="2.js" defer></script> -->

  <!-- <script src="2.js" defer></script> -->
  <script src="ProductsManager.js"></script>
  <script src="DomReact.js" defer></script>

  <script>
    const initialData = [
      {
        product: "Apple iPhone 13",
        reviews: [
          {
            id: 1,
            text: "Отличный телефон! Батарея держится долго.",
          },
          {

            id: 2,
            text: "Камера супер, фото выглядят просто потрясающе.",
          },
        ],
      },
      {
        product: "Samsung Galaxy Z Fold 3",
        reviews: [
          {
            id: 3,
            text: "Интересный дизайн, но дорогой.",
          },
        ],
      },
      {
        product: "Sony PlayStation 5",
        reviews: [
          {
            id: 4,
            text: "Люблю играть на PS5, графика на высоте.",
          },
        ],
      },
    ];

    let format = initialData.map(x => {
      x['addReview'] = [{ vRDelement: 'input' }, {
        vRDelement: 'button', text: 'Добавить',
        onclick: 'prodManager.addReview(this)'
      }]; return x;
    });
    format = format.map(x => { return { product: x } });

    let prodManager = new ProductsManager(format);
    debugger;

    document.addEventListener('DOMContentLoaded', function () {
      const domReact = new DomReact(format, document.getElementsByClassName('product-list')[0], true);
      window.domReact = domReact;
    }, false);

  </script>

  <style>
    .product {
      border: solid #adadad;
      margin: 20px;
      border-width: 1px;
    }

    .reviews {
      margin-left: 20px;
      font-size: 9px;
    }

    div.addReview.invalid:after {
      content: 'Только 50-500 символов';
      display: inline-block;
      width: fit-content;
      height: fit-content;
      font-size: 11px;
      margin-left: 12px;
      color: red;
    }
  </style>

</head>

<body>

  <div class="product-list">

  </div>

</body>

</html>